import{S as rn,i as sn,s as on,a as ln,b as ie,f as $e,e as P,q as W,c as ne,L as Fe,n as re,j as pe,v as j,h as Ge,k as N,M as Te,w as qe,p as Pe,r as we,I as J,J as x,d as fe,N as Re,y as un,m as Dn,P as fn,t as In,x as Ye,K as Me,g as Mn,O as Ce,u as Cn,z as Sn}from"../../mastodon.js";import{g as Ve,m as qn,M as Pn}from"./MastodonModal.js";import"./httpClient.js";import"./_commonjsHelpers.js";const{default:An}=window.tfgridGql;async function Qe(e,n){const i=await(await Ve(e)).twins.get_my_twin_id(),r=await new An(window.config.network).merge({nodeContracts:[{contractID:!0},{where:{twinID_eq:i,deploymentData_contains:'"projectName":"Mastodon"',AND:{deploymentData_contains:`"name":"md${i}${n}"`}}}],nameContracts:[{contractID:!0},{where:{twinID_eq:i,name_eq:`md${i}${n}`}}]});return[...r.nameContracts.map(o=>+o.contractID),...r.nodeContracts.map(o=>+o.contractID)]}function Ln(e){let n,t,i,s,r,o=String(e[0])+"",l,f,u=e[0].length<=1?"instance":"instances",a,c,d,p,w,m,q,D,T,v=String(e[0])+"",C,F,I=e[0].length<=1?"database":"databases",$,Y,V,Q=String(e[0])+"",L,y,M,U,O,E,ee,Ee,ge=e[0].length<=1?"this instance":"those instances",Ne,me,De,k,B,X,oe;return M=new e[2]({props:{label:"",placeholder:String(e[0]),type:"text",controller:e[5]}}),{c(){n=P("b-modal"),t=P("b-modal-header"),i=P("b-btns"),s=W(`You are about to delete your mastodon 
            `),r=P("strong"),l=W(o),f=ne(),a=W(u),c=W(`,
            Are you absolutely sure?`),d=ne(),p=P("b-modal-body"),w=P("b-notification"),w.textContent="Unexpected bad things will happen if you don't read this!",m=W(`

        This action `),q=P("strong"),q.textContent="cannot",D=W(` be undone. This will permanently delete the
        `),T=P("strong"),C=W(v),F=ne(),$=W(I),Y=W(`
        contains its all records posts, comments, users and all other tables.

        Please type 
        `),V=P("strong"),L=W(Q),y=W(`
        to confirm.

        `),Fe(M.$$.fragment),U=ne(),O=P("b-modal-actions"),E=P("b-btns"),ee=P("button"),Ee=W("Delete "),Ne=W(ge),De=ne(),k=P("button"),k.textContent="Close",this.c=re,pe(r,"color","rgb(240 58 95)"),pe(r,"margin-right","2px"),pe(r,"margin-left","2px"),j(i,"align","centered"),j(i,"addons",""),j(w,"color","warning"),j(w,"light",""),pe(T,"color","rgb(240 58 95)"),pe(V,"color","rgb(240 58 95)"),Ge(ee,"type","button"),ee.disabled=me=!e[1].valid,Ge(k,"type","button"),j(E,"align","right"),j(E,"size","small"),j(n,"open","")},m(S,R){ie(S,n,R),N(n,t),N(t,i),N(i,s),N(i,r),N(r,l),N(i,f),N(i,a),N(i,c),N(n,d),N(n,p),N(p,w),N(p,m),N(p,q),N(p,D),N(p,T),N(T,C),N(p,F),N(p,$),N(p,Y),N(p,V),N(V,L),N(p,y),Te(M,p,null),N(n,U),N(n,O),N(O,E),N(E,ee),N(ee,Ee),N(ee,Ne),N(E,De),N(E,k),B=!0,X||(oe=[qe(e[3].call(null,ee,{color:"danger"})),Pe(ee,"click",e[6]),qe(e[3].call(null,k,{color:"primary"})),Pe(k,"click",e[7])],X=!0)},p(S,[R]){(!B||R&1)&&o!==(o=String(S[0])+"")&&we(l,o),(!B||R&1)&&u!==(u=S[0].length<=1?"instance":"instances")&&we(a,u),(!B||R&1)&&v!==(v=String(S[0])+"")&&we(C,v),(!B||R&1)&&I!==(I=S[0].length<=1?"database":"databases")&&we($,I),(!B||R&1)&&Q!==(Q=String(S[0])+"")&&we(L,Q);const z={};R&1&&(z.placeholder=String(S[0])),M.$set(z),(!B||R&1)&&ge!==(ge=S[0].length<=1?"this instance":"those instances")&&we(Ne,ge),(!B||R&2&&me!==(me=!S[1].valid))&&(ee.disabled=me)},i(S){B||(J(M.$$.fragment,S),B=!0)},o(S){x(M.$$.fragment,S),B=!1},d(S){S&&fe(n),Re(M),X=!1,un(oe)}}}function On(e,n,t){let i,{selectedInstances:s=[]}=n;const{Input:r,btn:o}=window.tfSvelteBulmaWc,{fb:l,validators:f}=window.tfSvelteRxForms,u=Dn(),a=l.control("",[f.required("Instance name is required."),p=>{if(p.value!=String(s))return{message:`Instance name dose not match ${String(s)}`}}]);fn(e,a,p=>t(1,i=p));const c=()=>{u("isDelete",!0)},d=()=>{u("close")};return e.$$set=p=>{"selectedInstances"in p&&t(0,s=p.selectedInstances)},[s,i,r,o,u,a,c,d]}class an extends rn{constructor(n){super(),sn(this,{target:this.shadowRoot,props:ln(this.attributes),customElement:!0},On,Ln,on,{selectedInstances:0},null),n&&(n.target&&ie(n.target,this,n.anchor),n.props&&(this.$set(n.props),$e()))}static get observedAttributes(){return["selectedInstances"]}get selectedInstances(){return this.$$.ctx[0]}set selectedInstances(n){this.$$set({selectedInstances:n}),$e()}}customElements.define("tf-delete-modal",an);/*!
 *  decimal.js v10.4.2
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var _e=9e15,he=1e9,We="0123456789abcdef",Ae="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Le="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",je={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-_e,maxE:_e,crypto:!1},cn,ue,b=!0,Ze="[DecimalError] ",de=Ze+"Invalid argument: ",dn=Ze+"Precision limit exceeded",hn=Ze+"crypto unavailable",pn="[object Decimal]",G=Math.floor,Z=Math.pow,Fn=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Tn=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Rn=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,gn=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,se=1e7,_=7,Zn=9007199254740991,Un=Ae.length-1,Xe=Le.length-1,h={toStringTag:pn};h.absoluteValue=h.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),g(e)};h.ceil=function(){return g(new this.constructor(this),this.e+1,2)};h.clampedTo=h.clamp=function(e,n){var t,i=this,s=i.constructor;if(e=new s(e),n=new s(n),!e.s||!n.s)return new s(NaN);if(e.gt(n))throw Error(de+n);return t=i.cmp(e),t<0?e:i.cmp(n)>0?n:new s(i)};h.comparedTo=h.cmp=function(e){var n,t,i,s,r=this,o=r.d,l=(e=new r.constructor(e)).d,f=r.s,u=e.s;if(!o||!l)return!f||!u?NaN:f!==u?f:o===l?0:!o^f<0?1:-1;if(!o[0]||!l[0])return o[0]?f:l[0]?-u:0;if(f!==u)return f;if(r.e!==e.e)return r.e>e.e^f<0?1:-1;for(i=o.length,s=l.length,n=0,t=i<s?i:s;n<t;++n)if(o[n]!==l[n])return o[n]>l[n]^f<0?1:-1;return i===s?0:i>s^f<0?1:-1};h.cosine=h.cos=function(){var e,n,t=this,i=t.constructor;return t.d?t.d[0]?(e=i.precision,n=i.rounding,i.precision=e+Math.max(t.e,t.sd())+_,i.rounding=1,t=Bn(i,Nn(i,t)),i.precision=e,i.rounding=n,g(ue==2||ue==3?t.neg():t,e,n,!0)):new i(1):new i(NaN)};h.cubeRoot=h.cbrt=function(){var e,n,t,i,s,r,o,l,f,u,a=this,c=a.constructor;if(!a.isFinite()||a.isZero())return new c(a);for(b=!1,r=a.s*Z(a.s*a,1/3),!r||Math.abs(r)==1/0?(t=H(a.d),e=a.e,(r=(e-t.length+1)%3)&&(t+=r==1||r==-2?"0":"00"),r=Z(t,1/3),e=G((e+1)/3)-(e%3==(e<0?-1:2)),r==1/0?t="5e"+e:(t=r.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),i=new c(t),i.s=a.s):i=new c(r.toString()),o=(e=c.precision)+3;;)if(l=i,f=l.times(l).times(l),u=f.plus(a),i=A(u.plus(a).times(l),u.plus(f),o+2,1),H(l.d).slice(0,o)===(t=H(i.d)).slice(0,o))if(t=t.slice(o-3,o+1),t=="9999"||!s&&t=="4999"){if(!s&&(g(l,e+1,0),l.times(l).times(l).eq(a))){i=l;break}o+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(g(i,e+1,1),n=!i.times(i).times(i).eq(a));break}return b=!0,g(i,e,c.rounding,n)};h.decimalPlaces=h.dp=function(){var e,n=this.d,t=NaN;if(n){if(e=n.length-1,t=(e-G(this.e/_))*_,e=n[e],e)for(;e%10==0;e/=10)t--;t<0&&(t=0)}return t};h.dividedBy=h.div=function(e){return A(this,new this.constructor(e))};h.dividedToIntegerBy=h.divToInt=function(e){var n=this,t=n.constructor;return g(A(n,new t(e),0,1,1),t.precision,t.rounding)};h.equals=h.eq=function(e){return this.cmp(e)===0};h.floor=function(){return g(new this.constructor(this),this.e+1,3)};h.greaterThan=h.gt=function(e){return this.cmp(e)>0};h.greaterThanOrEqualTo=h.gte=function(e){var n=this.cmp(e);return n==1||n===0};h.hyperbolicCosine=h.cosh=function(){var e,n,t,i,s,r=this,o=r.constructor,l=new o(1);if(!r.isFinite())return new o(r.s?1/0:NaN);if(r.isZero())return l;t=o.precision,i=o.rounding,o.precision=t+Math.max(r.e,r.sd())+4,o.rounding=1,s=r.d.length,s<32?(e=Math.ceil(s/3),n=(1/Be(4,e)).toString()):(e=16,n="2.3283064365386962890625e-10"),r=be(o,1,r.times(n),new o(1),!0);for(var f,u=e,a=new o(8);u--;)f=r.times(r),r=l.minus(f.times(a.minus(f.times(a))));return g(r,o.precision=t,o.rounding=i,!0)};h.hyperbolicSine=h.sinh=function(){var e,n,t,i,s=this,r=s.constructor;if(!s.isFinite()||s.isZero())return new r(s);if(n=r.precision,t=r.rounding,r.precision=n+Math.max(s.e,s.sd())+4,r.rounding=1,i=s.d.length,i<3)s=be(r,2,s,s,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,s=s.times(1/Be(5,e)),s=be(r,2,s,s,!0);for(var o,l=new r(5),f=new r(16),u=new r(20);e--;)o=s.times(s),s=s.times(l.plus(o.times(f.times(o).plus(u))))}return r.precision=n,r.rounding=t,g(s,n,t,!0)};h.hyperbolicTangent=h.tanh=function(){var e,n,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(e=i.precision,n=i.rounding,i.precision=e+7,i.rounding=1,A(t.sinh(),t.cosh(),i.precision=e,i.rounding=n)):new i(t.s)};h.inverseCosine=h.acos=function(){var e,n=this,t=n.constructor,i=n.abs().cmp(1),s=t.precision,r=t.rounding;return i!==-1?i===0?n.isNeg()?te(t,s,r):new t(0):new t(NaN):n.isZero()?te(t,s+4,r).times(.5):(t.precision=s+6,t.rounding=1,n=n.asin(),e=te(t,s+4,r).times(.5),t.precision=s,t.rounding=r,e.minus(n))};h.inverseHyperbolicCosine=h.acosh=function(){var e,n,t=this,i=t.constructor;return t.lte(1)?new i(t.eq(1)?0:NaN):t.isFinite()?(e=i.precision,n=i.rounding,i.precision=e+Math.max(Math.abs(t.e),t.sd())+4,i.rounding=1,b=!1,t=t.times(t).minus(1).sqrt().plus(t),b=!0,i.precision=e,i.rounding=n,t.ln()):new i(t)};h.inverseHyperbolicSine=h.asinh=function(){var e,n,t=this,i=t.constructor;return!t.isFinite()||t.isZero()?new i(t):(e=i.precision,n=i.rounding,i.precision=e+2*Math.max(Math.abs(t.e),t.sd())+6,i.rounding=1,b=!1,t=t.times(t).plus(1).sqrt().plus(t),b=!0,i.precision=e,i.rounding=n,t.ln())};h.inverseHyperbolicTangent=h.atanh=function(){var e,n,t,i,s=this,r=s.constructor;return s.isFinite()?s.e>=0?new r(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(e=r.precision,n=r.rounding,i=s.sd(),Math.max(i,e)<2*-s.e-1?g(new r(s),e,n,!0):(r.precision=t=i-s.e,s=A(s.plus(1),new r(1).minus(s),t+e,1),r.precision=e+4,r.rounding=1,s=s.ln(),r.precision=e,r.rounding=n,s.times(.5))):new r(NaN)};h.inverseSine=h.asin=function(){var e,n,t,i,s=this,r=s.constructor;return s.isZero()?new r(s):(n=s.abs().cmp(1),t=r.precision,i=r.rounding,n!==-1?n===0?(e=te(r,t+4,i).times(.5),e.s=s.s,e):new r(NaN):(r.precision=t+6,r.rounding=1,s=s.div(new r(1).minus(s.times(s)).sqrt().plus(1)).atan(),r.precision=t,r.rounding=i,s.times(2)))};h.inverseTangent=h.atan=function(){var e,n,t,i,s,r,o,l,f,u=this,a=u.constructor,c=a.precision,d=a.rounding;if(u.isFinite()){if(u.isZero())return new a(u);if(u.abs().eq(1)&&c+4<=Xe)return o=te(a,c+4,d).times(.25),o.s=u.s,o}else{if(!u.s)return new a(NaN);if(c+4<=Xe)return o=te(a,c+4,d).times(.5),o.s=u.s,o}for(a.precision=l=c+10,a.rounding=1,t=Math.min(28,l/_+2|0),e=t;e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(b=!1,n=Math.ceil(l/_),i=1,f=u.times(u),o=new a(u),s=u;e!==-1;)if(s=s.times(f),r=o.minus(s.div(i+=2)),s=s.times(f),o=r.plus(s.div(i+=2)),o.d[n]!==void 0)for(e=n;o.d[e]===r.d[e]&&e--;);return t&&(o=o.times(2<<t-1)),b=!0,g(o,a.precision=c,a.rounding=d,!0)};h.isFinite=function(){return!!this.d};h.isInteger=h.isInt=function(){return!!this.d&&G(this.e/_)>this.d.length-2};h.isNaN=function(){return!this.s};h.isNegative=h.isNeg=function(){return this.s<0};h.isPositive=h.isPos=function(){return this.s>0};h.isZero=function(){return!!this.d&&this.d[0]===0};h.lessThan=h.lt=function(e){return this.cmp(e)<0};h.lessThanOrEqualTo=h.lte=function(e){return this.cmp(e)<1};h.logarithm=h.log=function(e){var n,t,i,s,r,o,l,f,u=this,a=u.constructor,c=a.precision,d=a.rounding,p=5;if(e==null)e=new a(10),n=!0;else{if(e=new a(e),t=e.d,e.s<0||!t||!t[0]||e.eq(1))return new a(NaN);n=e.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new a(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(n)if(t.length>1)r=!0;else{for(s=t[0];s%10===0;)s/=10;r=s!==1}if(b=!1,l=c+p,o=ce(u,l),i=n?Oe(a,l+10):ce(e,l),f=A(o,i,l,1),ve(f.d,s=c,d))do if(l+=10,o=ce(u,l),i=n?Oe(a,l+10):ce(e,l),f=A(o,i,l,1),!r){+H(f.d).slice(s+1,s+15)+1==1e14&&(f=g(f,c+1,0));break}while(ve(f.d,s+=10,d));return b=!0,g(f,c,d)};h.minus=h.sub=function(e){var n,t,i,s,r,o,l,f,u,a,c,d,p=this,w=p.constructor;if(e=new w(e),!p.d||!e.d)return!p.s||!e.s?e=new w(NaN):p.d?e.s=-e.s:e=new w(e.d||p.s!==e.s?p:NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(u=p.d,d=e.d,l=w.precision,f=w.rounding,!u[0]||!d[0]){if(d[0])e.s=-e.s;else if(u[0])e=new w(p);else return new w(f===3?-0:0);return b?g(e,l,f):e}if(t=G(e.e/_),a=G(p.e/_),u=u.slice(),r=a-t,r){for(c=r<0,c?(n=u,r=-r,o=d.length):(n=d,t=a,o=u.length),i=Math.max(Math.ceil(l/_),o)+2,r>i&&(r=i,n.length=1),n.reverse(),i=r;i--;)n.push(0);n.reverse()}else{for(i=u.length,o=d.length,c=i<o,c&&(o=i),i=0;i<o;i++)if(u[i]!=d[i]){c=u[i]<d[i];break}r=0}for(c&&(n=u,u=d,d=n,e.s=-e.s),o=u.length,i=d.length-o;i>0;--i)u[o++]=0;for(i=d.length;i>r;){if(u[--i]<d[i]){for(s=i;s&&u[--s]===0;)u[s]=se-1;--u[s],u[i]+=se}u[i]-=d[i]}for(;u[--o]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(e.d=u,e.e=Ue(u,t),b?g(e,l,f):e):new w(f===3?-0:0)};h.modulo=h.mod=function(e){var n,t=this,i=t.constructor;return e=new i(e),!t.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||t.d&&!t.d[0]?g(new i(t),i.precision,i.rounding):(b=!1,i.modulo==9?(n=A(t,e.abs(),0,3,1),n.s*=e.s):n=A(t,e,0,i.modulo,1),n=n.times(e),b=!0,t.minus(n))};h.naturalExponential=h.exp=function(){return ze(this)};h.naturalLogarithm=h.ln=function(){return ce(this)};h.negated=h.neg=function(){var e=new this.constructor(this);return e.s=-e.s,g(e)};h.plus=h.add=function(e){var n,t,i,s,r,o,l,f,u,a,c=this,d=c.constructor;if(e=new d(e),!c.d||!e.d)return!c.s||!e.s?e=new d(NaN):c.d||(e=new d(e.d||c.s===e.s?c:NaN)),e;if(c.s!=e.s)return e.s=-e.s,c.minus(e);if(u=c.d,a=e.d,l=d.precision,f=d.rounding,!u[0]||!a[0])return a[0]||(e=new d(c)),b?g(e,l,f):e;if(r=G(c.e/_),i=G(e.e/_),u=u.slice(),s=r-i,s){for(s<0?(t=u,s=-s,o=a.length):(t=a,i=r,o=u.length),r=Math.ceil(l/_),o=r>o?r+1:o+1,s>o&&(s=o,t.length=1),t.reverse();s--;)t.push(0);t.reverse()}for(o=u.length,s=a.length,o-s<0&&(s=o,t=a,a=u,u=t),n=0;s;)n=(u[--s]=u[s]+a[s]+n)/se|0,u[s]%=se;for(n&&(u.unshift(n),++i),o=u.length;u[--o]==0;)u.pop();return e.d=u,e.e=Ue(u,i),b?g(e,l,f):e};h.precision=h.sd=function(e){var n,t=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(de+e);return t.d?(n=mn(t.d),e&&t.e+1>n&&(n=t.e+1)):n=NaN,n};h.round=function(){var e=this,n=e.constructor;return g(new n(e),e.e+1,n.rounding)};h.sine=h.sin=function(){var e,n,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(e=i.precision,n=i.rounding,i.precision=e+Math.max(t.e,t.sd())+_,i.rounding=1,t=$n(i,Nn(i,t)),i.precision=e,i.rounding=n,g(ue>2?t.neg():t,e,n,!0)):new i(NaN)};h.squareRoot=h.sqrt=function(){var e,n,t,i,s,r,o=this,l=o.d,f=o.e,u=o.s,a=o.constructor;if(u!==1||!l||!l[0])return new a(!u||u<0&&(!l||l[0])?NaN:l?o:1/0);for(b=!1,u=Math.sqrt(+o),u==0||u==1/0?(n=H(l),(n.length+f)%2==0&&(n+="0"),u=Math.sqrt(n),f=G((f+1)/2)-(f<0||f%2),u==1/0?n="5e"+f:(n=u.toExponential(),n=n.slice(0,n.indexOf("e")+1)+f),i=new a(n)):i=new a(u.toString()),t=(f=a.precision)+3;;)if(r=i,i=r.plus(A(o,r,t+2,1)).times(.5),H(r.d).slice(0,t)===(n=H(i.d)).slice(0,t))if(n=n.slice(t-3,t+1),n=="9999"||!s&&n=="4999"){if(!s&&(g(r,f+1,0),r.times(r).eq(o))){i=r;break}t+=4,s=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(g(i,f+1,1),e=!i.times(i).eq(o));break}return b=!0,g(i,f,a.rounding,e)};h.tangent=h.tan=function(){var e,n,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(e=i.precision,n=i.rounding,i.precision=e+10,i.rounding=1,t=t.sin(),t.s=1,t=A(t,new i(1).minus(t.times(t)).sqrt(),e+10,0),i.precision=e,i.rounding=n,g(ue==2||ue==4?t.neg():t,e,n,!0)):new i(NaN)};h.times=h.mul=function(e){var n,t,i,s,r,o,l,f,u,a=this,c=a.constructor,d=a.d,p=(e=new c(e)).d;if(e.s*=a.s,!d||!d[0]||!p||!p[0])return new c(!e.s||d&&!d[0]&&!p||p&&!p[0]&&!d?NaN:!d||!p?e.s/0:e.s*0);for(t=G(a.e/_)+G(e.e/_),f=d.length,u=p.length,f<u&&(r=d,d=p,p=r,o=f,f=u,u=o),r=[],o=f+u,i=o;i--;)r.push(0);for(i=u;--i>=0;){for(n=0,s=f+i;s>i;)l=r[s]+p[i]*d[s-i-1]+n,r[s--]=l%se|0,n=l/se|0;r[s]=(r[s]+n)%se|0}for(;!r[--o];)r.pop();return n?++t:r.shift(),e.d=r,e.e=Ue(r,t),b?g(e,c.precision,c.rounding):e};h.toBinary=function(e,n){return Ke(this,2,e,n)};h.toDecimalPlaces=h.toDP=function(e,n){var t=this,i=t.constructor;return t=new i(t),e===void 0?t:(K(e,0,he),n===void 0?n=i.rounding:K(n,0,8),g(t,e+t.e+1,n))};h.toExponential=function(e,n){var t,i=this,s=i.constructor;return e===void 0?t=le(i,!0):(K(e,0,he),n===void 0?n=s.rounding:K(n,0,8),i=g(new s(i),e+1,n),t=le(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};h.toFixed=function(e,n){var t,i,s=this,r=s.constructor;return e===void 0?t=le(s):(K(e,0,he),n===void 0?n=r.rounding:K(n,0,8),i=g(new r(s),e+s.e+1,n),t=le(i,!1,e+i.e+1)),s.isNeg()&&!s.isZero()?"-"+t:t};h.toFraction=function(e){var n,t,i,s,r,o,l,f,u,a,c,d,p=this,w=p.d,m=p.constructor;if(!w)return new m(p);if(u=t=new m(1),i=f=new m(0),n=new m(i),r=n.e=mn(w)-p.e-1,o=r%_,n.d[0]=Z(10,o<0?_+o:o),e==null)e=r>0?n:u;else{if(l=new m(e),!l.isInt()||l.lt(u))throw Error(de+l);e=l.gt(n)?r>0?n:u:l}for(b=!1,l=new m(H(w)),a=m.precision,m.precision=r=w.length*_*2;c=A(l,n,0,1,1),s=t.plus(c.times(i)),s.cmp(e)!=1;)t=i,i=s,s=u,u=f.plus(c.times(s)),f=s,s=n,n=l.minus(c.times(s)),l=s;return s=A(e.minus(t),i,0,1,1),f=f.plus(s.times(u)),t=t.plus(s.times(i)),f.s=u.s=p.s,d=A(u,i,r,1).minus(p).abs().cmp(A(f,t,r,1).minus(p).abs())<1?[u,i]:[f,t],m.precision=a,b=!0,d};h.toHexadecimal=h.toHex=function(e,n){return Ke(this,16,e,n)};h.toNearest=function(e,n){var t=this,i=t.constructor;if(t=new i(t),e==null){if(!t.d)return t;e=new i(1),n=i.rounding}else{if(e=new i(e),n===void 0?n=i.rounding:K(n,0,8),!t.d)return e.s?t:e;if(!e.d)return e.s&&(e.s=t.s),e}return e.d[0]?(b=!1,t=A(t,e,0,n,1).times(e),b=!0,g(t)):(e.s=t.s,t=e),t};h.toNumber=function(){return+this};h.toOctal=function(e,n){return Ke(this,8,e,n)};h.toPower=h.pow=function(e){var n,t,i,s,r,o,l=this,f=l.constructor,u=+(e=new f(e));if(!l.d||!e.d||!l.d[0]||!e.d[0])return new f(Z(+l,u));if(l=new f(l),l.eq(1))return l;if(i=f.precision,r=f.rounding,e.eq(1))return g(l,i,r);if(n=G(e.e/_),n>=e.d.length-1&&(t=u<0?-u:u)<=Zn)return s=wn(f,l,t,i),e.s<0?new f(1).div(s):g(s,i,r);if(o=l.s,o<0){if(n<e.d.length-1)return new f(NaN);if((e.d[n]&1)==0&&(o=1),l.e==0&&l.d[0]==1&&l.d.length==1)return l.s=o,l}return t=Z(+l,u),n=t==0||!isFinite(t)?G(u*(Math.log("0."+H(l.d))/Math.LN10+l.e+1)):new f(t+"").e,n>f.maxE+1||n<f.minE-1?new f(n>0?o/0:0):(b=!1,f.rounding=l.s=1,t=Math.min(12,(n+"").length),s=ze(e.times(ce(l,i+t)),i),s.d&&(s=g(s,i+5,1),ve(s.d,i,r)&&(n=i+10,s=g(ze(e.times(ce(l,n+t)),n),n+5,1),+H(s.d).slice(i+1,i+15)+1==1e14&&(s=g(s,i+1,0)))),s.s=o,b=!0,f.rounding=r,g(s,i,r))};h.toPrecision=function(e,n){var t,i=this,s=i.constructor;return e===void 0?t=le(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(K(e,1,he),n===void 0?n=s.rounding:K(n,0,8),i=g(new s(i),e,n),t=le(i,e<=i.e||i.e<=s.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+t:t};h.toSignificantDigits=h.toSD=function(e,n){var t=this,i=t.constructor;return e===void 0?(e=i.precision,n=i.rounding):(K(e,1,he),n===void 0?n=i.rounding:K(n,0,8)),g(new i(t),e,n)};h.toString=function(){var e=this,n=e.constructor,t=le(e,e.e<=n.toExpNeg||e.e>=n.toExpPos);return e.isNeg()&&!e.isZero()?"-"+t:t};h.truncated=h.trunc=function(){return g(new this.constructor(this),this.e+1,1)};h.valueOf=h.toJSON=function(){var e=this,n=e.constructor,t=le(e,e.e<=n.toExpNeg||e.e>=n.toExpPos);return e.isNeg()?"-"+t:t};function H(e){var n,t,i,s=e.length-1,r="",o=e[0];if(s>0){for(r+=o,n=1;n<s;n++)i=e[n]+"",t=_-i.length,t&&(r+=ae(t)),r+=i;o=e[n],i=o+"",t=_-i.length,t&&(r+=ae(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return r+o}function K(e,n,t){if(e!==~~e||e<n||e>t)throw Error(de+e)}function ve(e,n,t,i){var s,r,o,l;for(r=e[0];r>=10;r/=10)--n;return--n<0?(n+=_,s=0):(s=Math.ceil((n+1)/_),n%=_),r=Z(10,_-n),l=e[s]%r|0,i==null?n<3?(n==0?l=l/100|0:n==1&&(l=l/10|0),o=t<4&&l==99999||t>3&&l==49999||l==5e4||l==0):o=(t<4&&l+1==r||t>3&&l+1==r/2)&&(e[s+1]/r/100|0)==Z(10,n-2)-1||(l==r/2||l==0)&&(e[s+1]/r/100|0)==0:n<4?(n==0?l=l/1e3|0:n==1?l=l/100|0:n==2&&(l=l/10|0),o=(i||t<4)&&l==9999||!i&&t>3&&l==4999):o=((i||t<4)&&l+1==r||!i&&t>3&&l+1==r/2)&&(e[s+1]/r/1e3|0)==Z(10,n-3)-1,o}function Se(e,n,t){for(var i,s=[0],r,o=0,l=e.length;o<l;){for(r=s.length;r--;)s[r]*=n;for(s[0]+=We.indexOf(e.charAt(o++)),i=0;i<s.length;i++)s[i]>t-1&&(s[i+1]===void 0&&(s[i+1]=0),s[i+1]+=s[i]/t|0,s[i]%=t)}return s.reverse()}function Bn(e,n){var t,i,s;if(n.isZero())return n;i=n.d.length,i<32?(t=Math.ceil(i/3),s=(1/Be(4,t)).toString()):(t=16,s="2.3283064365386962890625e-10"),e.precision+=t,n=be(e,1,n.times(s),new e(1));for(var r=t;r--;){var o=n.times(n);n=o.times(o).minus(o).times(8).plus(1)}return e.precision-=t,n}var A=function(){function e(i,s,r){var o,l=0,f=i.length;for(i=i.slice();f--;)o=i[f]*s+l,i[f]=o%r|0,l=o/r|0;return l&&i.unshift(l),i}function n(i,s,r,o){var l,f;if(r!=o)f=r>o?1:-1;else for(l=f=0;l<r;l++)if(i[l]!=s[l]){f=i[l]>s[l]?1:-1;break}return f}function t(i,s,r,o){for(var l=0;r--;)i[r]-=l,l=i[r]<s[r]?1:0,i[r]=l*o+i[r]-s[r];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,r,o,l,f){var u,a,c,d,p,w,m,q,D,T,v,C,F,I,$,Y,V,Q,L,y,M=i.constructor,U=i.s==s.s?1:-1,O=i.d,E=s.d;if(!O||!O[0]||!E||!E[0])return new M(!i.s||!s.s||(O?E&&O[0]==E[0]:!E)?NaN:O&&O[0]==0||!E?U*0:U/0);for(f?(p=1,a=i.e-s.e):(f=se,p=_,a=G(i.e/p)-G(s.e/p)),L=E.length,V=O.length,D=new M(U),T=D.d=[],c=0;E[c]==(O[c]||0);c++);if(E[c]>(O[c]||0)&&a--,r==null?(I=r=M.precision,o=M.rounding):l?I=r+(i.e-s.e)+1:I=r,I<0)T.push(1),w=!0;else{if(I=I/p+2|0,c=0,L==1){for(d=0,E=E[0],I++;(c<V||d)&&I--;c++)$=d*f+(O[c]||0),T[c]=$/E|0,d=$%E|0;w=d||c<V}else{for(d=f/(E[0]+1)|0,d>1&&(E=e(E,d,f),O=e(O,d,f),L=E.length,V=O.length),Y=L,v=O.slice(0,L),C=v.length;C<L;)v[C++]=0;y=E.slice(),y.unshift(0),Q=E[0],E[1]>=f/2&&++Q;do d=0,u=n(E,v,L,C),u<0?(F=v[0],L!=C&&(F=F*f+(v[1]||0)),d=F/Q|0,d>1?(d>=f&&(d=f-1),m=e(E,d,f),q=m.length,C=v.length,u=n(m,v,q,C),u==1&&(d--,t(m,L<q?y:E,q,f))):(d==0&&(u=d=1),m=E.slice()),q=m.length,q<C&&m.unshift(0),t(v,m,C,f),u==-1&&(C=v.length,u=n(E,v,L,C),u<1&&(d++,t(v,L<C?y:E,C,f))),C=v.length):u===0&&(d++,v=[0]),T[c++]=d,u&&v[0]?v[C++]=O[Y]||0:(v=[O[Y]],C=1);while((Y++<V||v[0]!==void 0)&&I--);w=v[0]!==void 0}T[0]||T.shift()}if(p==1)D.e=a,cn=w;else{for(c=1,d=T[0];d>=10;d/=10)c++;D.e=c+a*p-1,g(D,l?r+D.e+1:r,o,w)}return D}}();function g(e,n,t,i){var s,r,o,l,f,u,a,c,d,p=e.constructor;e:if(n!=null){if(c=e.d,!c)return e;for(s=1,l=c[0];l>=10;l/=10)s++;if(r=n-s,r<0)r+=_,o=n,a=c[d=0],f=a/Z(10,s-o-1)%10|0;else if(d=Math.ceil((r+1)/_),l=c.length,d>=l)if(i){for(;l++<=d;)c.push(0);a=f=0,s=1,r%=_,o=r-_+1}else break e;else{for(a=l=c[d],s=1;l>=10;l/=10)s++;r%=_,o=r-_+s,f=o<0?0:a/Z(10,s-o-1)%10|0}if(i=i||n<0||c[d+1]!==void 0||(o<0?a:a%Z(10,s-o-1)),u=t<4?(f||i)&&(t==0||t==(e.s<0?3:2)):f>5||f==5&&(t==4||i||t==6&&(r>0?o>0?a/Z(10,s-o):0:c[d-1])%10&1||t==(e.s<0?8:7)),n<1||!c[0])return c.length=0,u?(n-=e.e+1,c[0]=Z(10,(_-n%_)%_),e.e=-n||0):c[0]=e.e=0,e;if(r==0?(c.length=d,l=1,d--):(c.length=d+1,l=Z(10,_-r),c[d]=o>0?(a/Z(10,s-o)%Z(10,o)|0)*l:0),u)for(;;)if(d==0){for(r=1,o=c[0];o>=10;o/=10)r++;for(o=c[0]+=l,l=1;o>=10;o/=10)l++;r!=l&&(e.e++,c[0]==se&&(c[0]=1));break}else{if(c[d]+=l,c[d]!=se)break;c[d--]=0,l=1}for(r=c.length;c[--r]===0;)c.pop()}return b&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function le(e,n,t){if(!e.isFinite())return bn(e);var i,s=e.e,r=H(e.d),o=r.length;return n?(t&&(i=t-o)>0?r=r.charAt(0)+"."+r.slice(1)+ae(i):o>1&&(r=r.charAt(0)+"."+r.slice(1)),r=r+(e.e<0?"e":"e+")+e.e):s<0?(r="0."+ae(-s-1)+r,t&&(i=t-o)>0&&(r+=ae(i))):s>=o?(r+=ae(s+1-o),t&&(i=t-s-1)>0&&(r=r+"."+ae(i))):((i=s+1)<o&&(r=r.slice(0,i)+"."+r.slice(i)),t&&(i=t-o)>0&&(s+1===o&&(r+="."),r+=ae(i))),r}function Ue(e,n){var t=e[0];for(n*=_;t>=10;t/=10)n++;return n}function Oe(e,n,t){if(n>Un)throw b=!0,t&&(e.precision=t),Error(dn);return g(new e(Ae),n,1,!0)}function te(e,n,t){if(n>Xe)throw Error(dn);return g(new e(Le),n,t,!0)}function mn(e){var n=e.length-1,t=n*_+1;if(n=e[n],n){for(;n%10==0;n/=10)t--;for(n=e[0];n>=10;n/=10)t++}return t}function ae(e){for(var n="";e--;)n+="0";return n}function wn(e,n,t,i){var s,r=new e(1),o=Math.ceil(i/_+4);for(b=!1;;){if(t%2&&(r=r.times(n),xe(r.d,o)&&(s=!0)),t=G(t/2),t===0){t=r.d.length-1,s&&r.d[t]===0&&++r.d[t];break}n=n.times(n),xe(n.d,o)}return b=!0,r}function ye(e){return e.d[e.d.length-1]&1}function _n(e,n,t){for(var i,s=new e(n[0]),r=0;++r<n.length;)if(i=new e(n[r]),i.s)s[t](i)&&(s=i);else{s=i;break}return s}function ze(e,n){var t,i,s,r,o,l,f,u=0,a=0,c=0,d=e.constructor,p=d.rounding,w=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(n==null?(b=!1,f=w):f=n,l=new d(.03125);e.e>-2;)e=e.times(l),c+=5;for(i=Math.log(Z(2,c))/Math.LN10*2+5|0,f+=i,t=r=o=new d(1),d.precision=f;;){if(r=g(r.times(e),f,1),t=t.times(++a),l=o.plus(A(r,t,f,1)),H(l.d).slice(0,f)===H(o.d).slice(0,f)){for(s=c;s--;)o=g(o.times(o),f,1);if(n==null)if(u<3&&ve(o.d,f-i,p,u))d.precision=f+=10,t=r=l=new d(1),a=0,u++;else return g(o,d.precision=w,p,b=!0);else return d.precision=w,o}o=l}}function ce(e,n){var t,i,s,r,o,l,f,u,a,c,d,p=1,w=10,m=e,q=m.d,D=m.constructor,T=D.rounding,v=D.precision;if(m.s<0||!q||!q[0]||!m.e&&q[0]==1&&q.length==1)return new D(q&&!q[0]?-1/0:m.s!=1?NaN:q?0:m);if(n==null?(b=!1,a=v):a=n,D.precision=a+=w,t=H(q),i=t.charAt(0),Math.abs(r=m.e)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)m=m.times(e),t=H(m.d),i=t.charAt(0),p++;r=m.e,i>1?(m=new D("0."+t),r++):m=new D(i+"."+t.slice(1))}else return u=Oe(D,a+2,v).times(r+""),m=ce(new D(i+"."+t.slice(1)),a-w).plus(u),D.precision=v,n==null?g(m,v,T,b=!0):m;for(c=m,f=o=m=A(m.minus(1),m.plus(1),a,1),d=g(m.times(m),a,1),s=3;;){if(o=g(o.times(d),a,1),u=f.plus(A(o,new D(s),a,1)),H(u.d).slice(0,a)===H(f.d).slice(0,a))if(f=f.times(2),r!==0&&(f=f.plus(Oe(D,a+2,v).times(r+""))),f=A(f,new D(p),a,1),n==null)if(ve(f.d,a-w,T,l))D.precision=a+=w,u=o=m=A(c.minus(1),c.plus(1),a,1),d=g(m.times(m),a,1),s=l=1;else return g(f,D.precision=v,T,b=!0);else return D.precision=v,f;f=u,s+=2}}function bn(e){return String(e.s*e.s/0)}function Je(e,n){var t,i,s;for((t=n.indexOf("."))>-1&&(n=n.replace(".","")),(i=n.search(/e/i))>0?(t<0&&(t=i),t+=+n.slice(i+1),n=n.substring(0,i)):t<0&&(t=n.length),i=0;n.charCodeAt(i)===48;i++);for(s=n.length;n.charCodeAt(s-1)===48;--s);if(n=n.slice(i,s),n){if(s-=i,e.e=t=t-i-1,e.d=[],i=(t+1)%_,t<0&&(i+=_),i<s){for(i&&e.d.push(+n.slice(0,i)),s-=_;i<s;)e.d.push(+n.slice(i,i+=_));n=n.slice(i),i=_-n.length}else i-=s;for(;i--;)n+="0";e.d.push(+n),b&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Hn(e,n){var t,i,s,r,o,l,f,u,a;if(n.indexOf("_")>-1){if(n=n.replace(/(\d)_(?=\d)/g,"$1"),gn.test(n))return Je(e,n)}else if(n==="Infinity"||n==="NaN")return+n||(e.s=NaN),e.e=NaN,e.d=null,e;if(Tn.test(n))t=16,n=n.toLowerCase();else if(Fn.test(n))t=2;else if(Rn.test(n))t=8;else throw Error(de+n);for(r=n.search(/p/i),r>0?(f=+n.slice(r+1),n=n.substring(2,r)):n=n.slice(2),r=n.indexOf("."),o=r>=0,i=e.constructor,o&&(n=n.replace(".",""),l=n.length,r=l-r,s=wn(i,new i(t),r,r*2)),u=Se(n,t,se),a=u.length-1,r=a;u[r]===0;--r)u.pop();return r<0?new i(e.s*0):(e.e=Ue(u,a),e.d=u,b=!1,o&&(e=A(e,s,l*4)),f&&(e=e.times(Math.abs(f)<54?Z(2,f):ke.pow(2,f))),b=!0,e)}function $n(e,n){var t,i=n.d.length;if(i<3)return n.isZero()?n:be(e,2,n,n);t=1.4*Math.sqrt(i),t=t>16?16:t|0,n=n.times(1/Be(5,t)),n=be(e,2,n,n);for(var s,r=new e(5),o=new e(16),l=new e(20);t--;)s=n.times(n),n=n.times(r.plus(s.times(o.times(s).minus(l))));return n}function be(e,n,t,i,s){var r,o,l,f,u=e.precision,a=Math.ceil(u/_);for(b=!1,f=t.times(t),l=new e(i);;){if(o=A(l.times(f),new e(n++*n++),u,1),l=s?i.plus(o):i.minus(o),i=A(o.times(f),new e(n++*n++),u,1),o=l.plus(i),o.d[a]!==void 0){for(r=a;o.d[r]===l.d[r]&&r--;);if(r==-1)break}r=l,l=i,i=o,o=r}return b=!0,o.d.length=a+1,o}function Be(e,n){for(var t=e;--n;)t*=e;return t}function Nn(e,n){var t,i=n.s<0,s=te(e,e.precision,1),r=s.times(.5);if(n=n.abs(),n.lte(r))return ue=i?4:1,n;if(t=n.divToInt(s),t.isZero())ue=i?3:2;else{if(n=n.minus(t.times(s)),n.lte(r))return ue=ye(t)?i?2:3:i?4:1,n;ue=ye(t)?i?1:4:i?3:2}return n.minus(s).abs()}function Ke(e,n,t,i){var s,r,o,l,f,u,a,c,d,p=e.constructor,w=t!==void 0;if(w?(K(t,1,he),i===void 0?i=p.rounding:K(i,0,8)):(t=p.precision,i=p.rounding),!e.isFinite())a=bn(e);else{for(a=le(e),o=a.indexOf("."),w?(s=2,n==16?t=t*4-3:n==8&&(t=t*3-2)):s=n,o>=0&&(a=a.replace(".",""),d=new p(1),d.e=a.length-o,d.d=Se(le(d),10,s),d.e=d.d.length),c=Se(a,10,s),r=f=c.length;c[--f]==0;)c.pop();if(!c[0])a=w?"0p+0":"0";else{if(o<0?r--:(e=new p(e),e.d=c,e.e=r,e=A(e,d,t,i,0,s),c=e.d,r=e.e,u=cn),o=c[t],l=s/2,u=u||c[t+1]!==void 0,u=i<4?(o!==void 0||u)&&(i===0||i===(e.s<0?3:2)):o>l||o===l&&(i===4||u||i===6&&c[t-1]&1||i===(e.s<0?8:7)),c.length=t,u)for(;++c[--t]>s-1;)c[t]=0,t||(++r,c.unshift(1));for(f=c.length;!c[f-1];--f);for(o=0,a="";o<f;o++)a+=We.charAt(c[o]);if(w){if(f>1)if(n==16||n==8){for(o=n==16?4:3,--f;f%o;f++)a+="0";for(c=Se(a,s,n),f=c.length;!c[f-1];--f);for(o=1,a="1.";o<f;o++)a+=We.charAt(c[o])}else a=a.charAt(0)+"."+a.slice(1);a=a+(r<0?"p":"p+")+r}else if(r<0){for(;++r;)a="0"+a;a="0."+a}else if(++r>f)for(r-=f;r--;)a+="0";else r<f&&(a=a.slice(0,r)+"."+a.slice(r))}a=(n==16?"0x":n==2?"0b":n==8?"0o":"")+a}return e.s<0?"-"+a:a}function xe(e,n){if(e.length>n)return e.length=n,!0}function Gn(e){return new this(e).abs()}function Vn(e){return new this(e).acos()}function Wn(e){return new this(e).acosh()}function jn(e,n){return new this(e).plus(n)}function Xn(e){return new this(e).asin()}function zn(e){return new this(e).asinh()}function Jn(e){return new this(e).atan()}function Kn(e){return new this(e).atanh()}function Yn(e,n){e=new this(e),n=new this(n);var t,i=this.precision,s=this.rounding,r=i+4;return!e.s||!n.s?t=new this(NaN):!e.d&&!n.d?(t=te(this,r,1).times(n.s>0?.25:.75),t.s=e.s):!n.d||e.isZero()?(t=n.s<0?te(this,i,s):new this(0),t.s=e.s):!e.d||n.isZero()?(t=te(this,r,1).times(.5),t.s=e.s):n.s<0?(this.precision=r,this.rounding=1,t=this.atan(A(e,n,r,1)),n=te(this,r,1),this.precision=i,this.rounding=s,t=e.s<0?t.minus(n):t.plus(n)):t=this.atan(A(e,n,r,1)),t}function Qn(e){return new this(e).cbrt()}function yn(e){return g(e=new this(e),e.e+1,2)}function xn(e,n,t){return new this(e).clamp(n,t)}function et(e){if(!e||typeof e!="object")throw Error(Ze+"Object expected");var n,t,i,s=e.defaults===!0,r=["precision",1,he,"rounding",0,8,"toExpNeg",-_e,0,"toExpPos",0,_e,"maxE",0,_e,"minE",-_e,0,"modulo",0,9];for(n=0;n<r.length;n+=3)if(t=r[n],s&&(this[t]=je[t]),(i=e[t])!==void 0)if(G(i)===i&&i>=r[n+1]&&i<=r[n+2])this[t]=i;else throw Error(de+t+": "+i);if(t="crypto",s&&(this[t]=je[t]),(i=e[t])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(hn);else this[t]=!1;else throw Error(de+t+": "+i);return this}function nt(e){return new this(e).cos()}function tt(e){return new this(e).cosh()}function vn(e){var n,t,i;function s(r){var o,l,f,u=this;if(!(u instanceof s))return new s(r);if(u.constructor=s,en(r)){u.s=r.s,b?!r.d||r.e>s.maxE?(u.e=NaN,u.d=null):r.e<s.minE?(u.e=0,u.d=[0]):(u.e=r.e,u.d=r.d.slice()):(u.e=r.e,u.d=r.d?r.d.slice():r.d);return}if(f=typeof r,f==="number"){if(r===0){u.s=1/r<0?-1:1,u.e=0,u.d=[0];return}if(r<0?(r=-r,u.s=-1):u.s=1,r===~~r&&r<1e7){for(o=0,l=r;l>=10;l/=10)o++;b?o>s.maxE?(u.e=NaN,u.d=null):o<s.minE?(u.e=0,u.d=[0]):(u.e=o,u.d=[r]):(u.e=o,u.d=[r]);return}else if(r*0!==0){r||(u.s=NaN),u.e=NaN,u.d=null;return}return Je(u,r.toString())}else if(f!=="string")throw Error(de+r);return(l=r.charCodeAt(0))===45?(r=r.slice(1),u.s=-1):(l===43&&(r=r.slice(1)),u.s=1),gn.test(r)?Je(u,r):Hn(u,r)}if(s.prototype=h,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=et,s.clone=vn,s.isDecimal=en,s.abs=Gn,s.acos=Vn,s.acosh=Wn,s.add=jn,s.asin=Xn,s.asinh=zn,s.atan=Jn,s.atanh=Kn,s.atan2=Yn,s.cbrt=Qn,s.ceil=yn,s.clamp=xn,s.cos=nt,s.cosh=tt,s.div=it,s.exp=rt,s.floor=st,s.hypot=ot,s.ln=lt,s.log=ut,s.log10=at,s.log2=ft,s.max=ct,s.min=dt,s.mod=ht,s.mul=pt,s.pow=gt,s.random=mt,s.round=wt,s.sign=_t,s.sin=bt,s.sinh=Nt,s.sqrt=vt,s.sub=kt,s.sum=Et,s.tan=Dt,s.tanh=It,s.trunc=Mt,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)e.hasOwnProperty(t=i[n++])||(e[t]=this[t]);return s.config(e),s}function it(e,n){return new this(e).div(n)}function rt(e){return new this(e).exp()}function st(e){return g(e=new this(e),e.e+1,3)}function ot(){var e,n,t=new this(0);for(b=!1,e=0;e<arguments.length;)if(n=new this(arguments[e++]),n.d)t.d&&(t=t.plus(n.times(n)));else{if(n.s)return b=!0,new this(1/0);t=n}return b=!0,t.sqrt()}function en(e){return e instanceof ke||e&&e.toStringTag===pn||!1}function lt(e){return new this(e).ln()}function ut(e,n){return new this(e).log(n)}function ft(e){return new this(e).log(2)}function at(e){return new this(e).log(10)}function ct(){return _n(this,arguments,"lt")}function dt(){return _n(this,arguments,"gt")}function ht(e,n){return new this(e).mod(n)}function pt(e,n){return new this(e).mul(n)}function gt(e,n){return new this(e).pow(n)}function mt(e){var n,t,i,s,r=0,o=new this(1),l=[];if(e===void 0?e=this.precision:K(e,1,he),i=Math.ceil(e/_),this.crypto)if(crypto.getRandomValues)for(n=crypto.getRandomValues(new Uint32Array(i));r<i;)s=n[r],s>=429e7?n[r]=crypto.getRandomValues(new Uint32Array(1))[0]:l[r++]=s%1e7;else if(crypto.randomBytes){for(n=crypto.randomBytes(i*=4);r<i;)s=n[r]+(n[r+1]<<8)+(n[r+2]<<16)+((n[r+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(n,r):(l.push(s%1e7),r+=4);r=i/4}else throw Error(hn);else for(;r<i;)l[r++]=Math.random()*1e7|0;for(i=l[--r],e%=_,i&&e&&(s=Z(10,_-e),l[r]=(i/s|0)*s);l[r]===0;r--)l.pop();if(r<0)t=0,l=[0];else{for(t=-1;l[0]===0;t-=_)l.shift();for(i=1,s=l[0];s>=10;s/=10)i++;i<_&&(t-=_-i)}return o.e=t,o.d=l,o}function wt(e){return g(e=new this(e),e.e+1,this.rounding)}function _t(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function bt(e){return new this(e).sin()}function Nt(e){return new this(e).sinh()}function vt(e){return new this(e).sqrt()}function kt(e,n){return new this(e).sub(n)}function Et(){var e=0,n=arguments,t=new this(n[e]);for(b=!1;t.s&&++e<n.length;)t=t.plus(n[e]);return b=!0,g(t,this.precision,this.rounding)}function Dt(e){return new this(e).tan()}function It(e){return new this(e).tanh()}function Mt(e){return g(e=new this(e),e.e+1,1)}h[Symbol.for("nodejs.util.inspect.custom")]=h.toString;h[Symbol.toStringTag]="Decimal";var ke=h.constructor=vn(je);Ae=new ke(Ae);Le=new ke(Le);function Ct(e){let n,t,i,s,r,o;const l=[At,Pt,qt],f=[];function u(d,p){return d[1]?0:d[4].length===0?1:2}n=u(e),t=f[n]=l[n](e);let a=e[3]&&nn(e),c=e[2]&&tn(e);return{c(){t.c(),i=ne(),a&&a.c(),s=ne(),c&&c.c(),r=Sn()},m(d,p){f[n].m(d,p),ie(d,i,p),a&&a.m(d,p),ie(d,s,p),c&&c.m(d,p),ie(d,r,p),o=!0},p(d,p){let w=n;n=u(d),n===w?f[n].p(d,p):(Ce(),x(f[w],1,1,()=>{f[w]=null}),Me(),t=f[n],t?t.p(d,p):(t=f[n]=l[n](d),t.c()),J(t,1),t.m(i.parentNode,i)),d[3]?a?(a.p(d,p),p[0]&8&&J(a,1)):(a=nn(d),a.c(),J(a,1),a.m(s.parentNode,s)):a&&(Ce(),x(a,1,1,()=>{a=null}),Me()),d[2]?c?(c.p(d,p),p[0]&4&&J(c,1)):(c=tn(d),c.c(),J(c,1),c.m(r.parentNode,r)):c&&(Ce(),x(c,1,1,()=>{c=null}),Me())},i(d){o||(J(t),J(a),J(c),o=!0)},o(d){x(t),x(a),x(c),o=!1},d(d){f[n].d(d),d&&fe(i),a&&a.d(d),d&&fe(s),c&&c.d(d),d&&fe(r)}}}function St(e){let n;return{c(){n=P("b-notification"),n.textContent="Please insert your mnemonics.",j(n,"color","info"),j(n,"light","")},m(t,i){ie(t,n,i)},p:re,i:re,o:re,d(t){t&&fe(n)}}}function qt(e){let n,t,i,s={disabled:e[9],selectable:!0,fullwidth:!0,headers:["name","Public IPv4","Planetary Network IP","Flist","Billing Rate"],position:!1,rows:e[4].map(e[22]),actions:[{label:"Show Details",click:e[23],color:"primary",icon:"fa-solid fa-eye",disabled:e[24]},{label:"Open",click:e[25],color:"link",icon:"fa-solid fa-link",disabled:e[26]},{label:"Delete",click:e[27],color:"danger",icon:"fa-solid fa-trash",loading:e[28],disabled:e[29]}]};return t=new e[12]({props:s}),e[30](t),t.$on("select",e[31]),{c(){n=P("div"),Fe(t.$$.fragment),pe(n,"width","100%"),pe(n,"overflow-x","auto")},m(r,o){ie(r,n,o),Te(t,n,null),i=!0},p(r,o){const l={};o[0]&512&&(l.disabled=r[9]),o[0]&48&&(l.rows=r[4].map(r[22])),o[0]&1560&&(l.actions=[{label:"Show Details",click:r[23],color:"primary",icon:"fa-solid fa-eye",disabled:r[24]},{label:"Open",click:r[25],color:"link",icon:"fa-solid fa-link",disabled:r[26]},{label:"Delete",click:r[27],color:"danger",icon:"fa-solid fa-trash",loading:r[28],disabled:r[29]}]),t.$set(l)},i(r){i||(J(t.$$.fragment,r),i=!0)},o(r){x(t.$$.fragment,r),i=!1},d(r){r&&fe(n),e[30](null),Re(t)}}}function Pt(e){let n;return{c(){n=P("b-notification"),n.textContent="No deployments were found.",j(n,"color","info"),j(n,"light","")},m(t,i){ie(t,n,i)},p:re,i:re,o:re,d(t){t&&fe(n)}}}function At(e){let n;return{c(){n=P("b-notification"),n.textContent="Listing Deployments ...",j(n,"color","primary"),j(n,"light","")},m(t,i){ie(t,n,i)},p:re,i:re,o:re,d(t){t&&fe(n)}}}function nn(e){let n,t;return n=new Pn({props:{data:e[3]}}),n.$on("close",e[32]),{c(){Fe(n.$$.fragment)},m(i,s){Te(n,i,s),t=!0},p(i,s){const r={};s[0]&8&&(r.data=i[3]),n.$set(r)},i(i){t||(J(n.$$.fragment,i),t=!0)},o(i){x(n.$$.fragment,i),t=!1},d(i){Re(n,i)}}}function tn(e){let n,t;return n=new an({props:{selectedInstances:e[7]}}),n.$on("close",e[33]),n.$on("isDelete",e[34]),n.$on("close",e[35]),{c(){Fe(n.$$.fragment)},m(i,s){Te(n,i,s),t=!0},p(i,s){const r={};s[0]&128&&(r.selectedInstances=i[7]),n.$set(r)},i(i){t||(J(n.$$.fragment,i),t=!0)},o(i){x(n.$$.fragment,i),t=!1},d(i){Re(n,i)}}}function Lt(e){let n,t,i,s,r,o,l,f,u,a,c,d,p,w,m,q,D,T,v,C,F,I,$,Y,V;const Q=[St,Ct],L=[];function y(M,U){return M[0].valid?1:0}return F=y(e),I=L[F]=Q[F](e),{c(){n=P("b-box"),t=P("b-content"),i=P("div"),s=P("h2"),s.textContent="Deployment List (Mastodon)",r=ne(),o=P("div"),l=P("button"),f=P("b-icon"),u=W(`
          Reload`),d=ne(),p=P("button"),w=P("b-icon"),m=W(`
          Delete`),T=ne(),v=P("hr"),C=ne(),I.c(),this.c=re,j(f,"icon","fa-solid fa-arrows-rotate"),l.disabled=a=e[1]||e[9]||!e[0].valid,In(l,"mr-2",!0),j(w,"icon","fa-solid fa-trash"),p.disabled=q=e[9]||e[8].length===0,Ge(i,"class","is-flex is-justify-content-space-between is-align-items-center")},m(M,U){ie(M,n,U),N(n,t),N(t,i),N(i,s),N(i,r),N(i,o),N(o,l),N(l,f),N(l,u),N(o,d),N(o,p),N(p,w),N(p,m),N(t,T),N(t,v),N(n,C),L[F].m(n,null),$=!0,Y||(V=[qe(c=e[13].call(null,l,{color:"primary",loading:e[1],size:"small"})),Pe(l,"click",e[17]),qe(D=e[13].call(null,p,{color:"danger",loading:e[9],size:"small"})),Pe(p,"click",e[21])],Y=!0)},p(M,U){(!$||U[0]&515&&a!==(a=M[1]||M[9]||!M[0].valid))&&(l.disabled=a),c&&Ye(c.update)&&U[0]&2&&c.update.call(null,{color:"primary",loading:M[1],size:"small"}),(!$||U[0]&768&&q!==(q=M[9]||M[8].length===0))&&(p.disabled=q),D&&Ye(D.update)&&U[0]&512&&D.update.call(null,{color:"danger",loading:M[9],size:"small"});let O=F;F=y(M),F===O?L[F].p(M,U):(Ce(),x(L[O],1,1,()=>{L[O]=null}),Me(),I=L[F],I?I.p(M,U):(I=L[F]=Q[F](M),I.c()),J(I,1),I.m(n,null))},i(M){$||(J(I),$=!0)},o(M){x(I),$=!1},d(M){M&&fe(n),L[F].d(),Y=!1,un(V)}}}function Ot(e,n,t){let i,s;const{Table:r,btn:o}=window.tfSvelteBulmaWc,l=qn.get("mnemonics");fn(e,l,k=>t(20,s=k)),window.mastodonList=Mn();let f=!1,u=!1,a,c=[],d=[],p,w=[];function m(k){const B=typeof k=="number"?[k]:v;for(const X of B)w.includes(c[X].name)||w.push(c[X].name);t(2,u=!0),t(6,p=k)}async function q(k){t(9,C=!0);const B=typeof k=="number"?[k]:v;let X=I.rows.slice();const oe=await Ve(i.value);for(const S of B){t(10,F=S);let R=await Qe(i.value,c[S].name);R=R.concat(c[S].contractId),await Promise.all(R.map(z=>oe.contracts.cancel({id:z}).catch(()=>null))),I.unselect(S),X[S]=null}t(11,I.rows=X.filter(S=>S!==null),I),t(4,c=c.filter((S,R)=>X[R]!==null)),t(10,F=void 0),t(9,C=!1)}async function D(){t(1,f=!0);const k=await Ve(i.value),X=(await k.machines.list()).map(z=>k.machines.getObj(z).catch(()=>null));let oe=[],S=[],R=[];for await(const z of X){const Ie=z==null?void 0:z.at(0);Ie&&(oe.push(Ie),R.push(Promise.all((await Qe(i.value,Ie.name)).concat(Ie.contractId).map(He=>k.contracts.getConsumption({id:He}))).then(He=>He.reduce((kn,En)=>kn.add(En),new ke("0")))))}for await(const z of R)S.push(z.isNaN()||z.lessThanOrEqualTo(0)?"No Data Available":z.toFixed()+" TFT/hour");t(4,c=oe),t(5,d=S),t(1,f=!1)}let T=!1,v=[],C=!1,F,I;function $(){D()}const Y=()=>m(),V=(k,B)=>{var oe;const X=(oe=k.publicIP)==null?void 0:oe.ip;return[k.name,X||"None",k.planetary,k.flist,d[B]]},Q=function(k){t(3,a=c[k.index])},L=()=>C,y=function(k){window.open(`https://${c[k.index].env.LOCAL_DOMAIN}`,"_blank")},M=()=>C,U=({index:k})=>m(k),O=({index:k})=>F===k&&C,E=()=>C;function ee(k){Cn[k?"unshift":"push"](()=>{I=k,t(11,I)})}const Ee=({detail:k})=>t(8,v=k),ge=()=>t(3,a=void 0),Ne=()=>t(2,u=void 0),me=({detail:k})=>{t(2,u=!1),t(7,w=[]),k===!0&&q(p)},De=()=>{t(7,w=[])};return e.$$.update=()=>{e.$$.dirty[0]&1048576&&t(0,i=s),e.$$.dirty[0]&524289&&i.valid!==T&&(t(19,T=i.valid),i.valid&&D())},[i,f,u,a,c,d,p,w,v,C,F,I,r,o,l,m,q,D,$,T,s,Y,V,Q,L,y,M,U,O,E,ee,Ee,ge,Ne,me,De]}class Ft extends rn{constructor(n){super(),sn(this,{target:this.shadowRoot,props:ln(this.attributes),customElement:!0},Ot,Lt,on,{reload:18},null,[-1,-1]),n&&(n.target&&ie(n.target,this,n.anchor),n.props&&(this.$set(n.props),$e()))}static get observedAttributes(){return["reload"]}get reload(){return this.$$.ctx[18]}}customElements.define("tf-mastodon-list",Ft);export{Ft as default};
